<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 위 3개의 메타 태그는 *반드시* head 태그의 처음에 와야합니다; 어떤 다른 콘텐츠들은 반드시 이 태그들 *다음에* 와야 합니다 -->
    <title><%= title %></title>
    <!-- 부트스트랩 -->
    <link rel='stylesheet' href="/stylesheets/css/bootstrap.min.css">
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <!--header.ejs include-->
    <% include ./header %>

    <% var names = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]; %>
    <% var days = [30, 31, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 1, 2]; %>
    <% var Month = "November";  %>
    <% var Year = "2018"; %>
    <div class="calendar-container">
      <div class="calendar-header">
        <h1>
           <%= Month %>
          <button>▾</button>
        </h1>
        <p><%= Year %></p>
      </div>
      <div class="calendar">
        <% for(let i = 0 ; i < 7 ; i++){%>
          <span class="day-name"><%= names[i] %></span>
        <% } %>
        <% var first=0; %>
        <% var tag_class = "day day--disabled"; %>
        <% var url=""; %>
        <% for(let i = 0 ; i < 35 ; i++){ %>

          <% if(i > 0 && i < 25 && days[i-1] > days[i] ) {%>
          <% first=i;%>
          <% url="./list?date="+days[i]; %>
          <% tag_class = "day"; } %>
          <% if(i>25 && days[i-1] > days[i] ) {%>
          <% tag_class = "day day--disabled"; } %>
        <div class= '<%= tag_class %>' <% if(tag_class=="day"){ %> onclick="location.href= '<%= url %>';" <% }%>><%= days[i] %></div>
        <%}%>

        <% for(let i = 0 ; i < 5 ; i++){%>

          <% var str_date = first+event_array[i].str; %>
          <% var row = parseInt((str_date-1) / 7)+2; %>
          <% console.log(row); %>
          <% var col = str_date % 7; if(col==0){col=7;}%>
          <% var len=event_array[i].end - event_array[i].str + 1; %>

          <section class="task task--warning" style="grid-column: <%= col %> / span <%= len %>;grid-row:<%= row %>;"  >
            <%=event_array[i].event_title %>
          </section>
        <%}%>
        <%#
        <section class="task task--primary">Product Checkup 1
          <div class="task__detail">
            <h2>Product Checkup 1</h2>
            <p>15-17th November</p>
          </div>
        </section>
        %>
        <section class="task task--info">Product Checkup 2</section>
      </div>
    </div>

    <!--footer.ejs include-->
    <% include ./footer %>
    
    <!-- jQuery (부트스트랩의 자바스크립트 플러그인을 위해 필요합니다) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

    <!-- bootstrap js 임포트 -->
    <script src="stylesheets/js/bootstrap.min.js"></script>
  </body>
</html>
